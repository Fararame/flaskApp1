<!doctype html>
<html lang="en">


<head>
  <meta charset="utf-8">
  <title>Chiang Mai AOI</title>
  <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
</head>


<body>
    <h1>Chiang Mai AQI</h1>
    <!-- <h2>current</h2> -->

    <div id="currentTime"></div>
    <div id="nexthrTime"></div>
    <script>
    (function () {
      $.getJSON("api/weather", function (data) {
        if (data.current) {
            $("#currentTime").append("<h2>current</h2>");
            let currentItem = [];
            $.each(data.current, function (key, val) {
            currentItem.push("<li>" + key + ": " + val + "</li>");
            });

            $("<ul/>", {
            "class": "current-list",
            html: currentItem.join("")
          }).appendTo("#currentTime");
        }


        if (data.next_hr && Object.keys(data.next_hr).length > 0) {
            $("#nexthrTime").append("<h2>next_hr</h2>");
            let nexthrItem = [];
            $.each(data.next_hr, function (key, val) {
                nexthrItem.push("<li>" + key + ": " + val + "</li>");
            });
            $("<ul/>", {
            "class": "next-hr-list",
            html: nexthrItem.join("")
          }).appendTo("#nexthrTime");
        }
      });
    })();
  </script>


</body>



</html>